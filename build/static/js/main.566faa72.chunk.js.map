{"version":3,"sources":["components/Filter.js","components/Personform.js","components/Persons.js","services.js","components/Notification.js","App.js","index.js"],"names":["Filter","value","handleChange","filteredPersons","onChange","map","person","name","number","Personform","handleAddPerson","handleInputChange","handlePhoneChange","onSubmit","type","Persons","persons","handleDeletePerson","style","display","width","justifyContent","onClick","id","baseUrl","Notification","message","className","App","useState","setPersons","newName","setNewName","newPhone","setNewPhone","filterInput","setFilterInput","setFilteredPersons","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","axios","get","then","response","data","e","target","filtered","filter","toLowerCase","includes","preventDefault","find","window","confirm","changedPerson","put","personid","setTimeout","catch","error","post","createPerson","newPerson","concat","delete","deletePerson","deletedPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.566faa72.chunk.js","sourcesContent":["const Filter = ({ value, handleChange, filteredPersons }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input onChange={handleChange} value={value} />\r\n      {filteredPersons.map((person) => (\r\n        <p key={person.number}>\r\n          {person.name} {person.number}\r\n        </p>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","const Personform = ({\r\n  handleAddPerson,\r\n  handleInputChange,\r\n  handlePhoneChange,\r\n  name,\r\n  number,\r\n}) => {\r\n  return (\r\n    <form onSubmit={handleAddPerson}>\r\n      <div>\r\n        name: <input onChange={handleInputChange} value={name} />\r\n      </div>\r\n      <div>\r\n        number: <input onChange={handlePhoneChange} value={number} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Personform;\r\n","const Persons = ({ persons, handleDeletePerson }) => {\r\n  return (\r\n    <>\r\n      {persons.map((person) => (\r\n        <div\r\n          key={person.id}\r\n          style={{\r\n            display: \"flex\",\r\n            width: \"30%\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <p>\r\n            {person.name} {person.number}\r\n          </p>\r\n          <button onClick={() => handleDeletePerson(person.name, person.id)}>\r\n            delete\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAllPersons = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst createPerson = (person) => {\r\n  const request = axios.post(baseUrl, person);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst updatePerson = (person) => {\r\n  const request = axios.put(`${baseUrl}/${person.id}`, person);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport { getAllPersons, createPerson, deletePerson, updatePerson };\r\n","const Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={type}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/Personform\";\nimport Persons from \"./components/Persons\";\nimport {\n  getAllPersons,\n  createPerson,\n  deletePerson,\n  updatePerson,\n} from \"./services\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [filterInput, setFilterInput] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  useEffect(() => {\n    getAllPersons().then((persons) => setPersons(persons));\n  }, []);\n\n  const handleAddPerson = (e) => {\n    e.preventDefault();\n    if (persons.find((person) => person.name === newName)) {\n      window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      const changedPerson = {\n        ...persons.find((person) => person.name === newName),\n        number: newPhone,\n      };\n      updatePerson(changedPerson)\n        .then((personid) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== personid.id ? person : changedPerson\n            )\n          );\n          setNewName(\"\");\n          setNewPhone(\"\");\n          setSuccessMessage(\"Changed phone number successfully\");\n          setTimeout(() => setSuccessMessage(null), 3000);\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `the person ${changedPerson.name} was already deleted from server`\n          );\n          setPersons(\n            persons.filter((person) => person.id !== changedPerson.id)\n          );\n          setTimeout(() => setErrorMessage(null), 3000);\n        });\n    } else {\n      const newPerson = { name: newName, number: newPhone };\n      createPerson(newPerson)\n        .then((newPerson) => {\n          setPersons(persons.concat(newPerson));\n          setSuccessMessage(`Added ${newPerson.name}`);\n          setTimeout(() => setSuccessMessage(null), 3000);\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => setErrorMessage(null), 3000);\n        });\n      setNewName(\"\");\n      setNewPhone(\"\");\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handlePhoneChange = (e) => {\n    setNewPhone(e.target.value);\n  };\n\n  const handleDeletePerson = (name, id) => {\n    window.confirm(`Delete ${name}`);\n    deletePerson(id).then((deletedPerson) =>\n      setPersons(persons.filter((person) => person.id !== id))\n    );\n  };\n\n  const hanldeFilterInputChange = (e) => {\n    setFilterInput(e.target.value);\n    const filtered = persons.filter(\n      (person) =>\n        e.target.value && person.name.toLowerCase().includes(e.target.value)\n    );\n    setFilteredPersons(filtered);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {successMessage ? (\n        <Notification message={successMessage} type=\"success\" />\n      ) : errorMessage ? (\n        <Notification message={errorMessage} type=\"error\" />\n      ) : null}\n      <Filter\n        value={filterInput}\n        handleChange={hanldeFilterInputChange}\n        filteredPersons={filteredPersons}\n      />\n      <h2>Add a new</h2>\n      <PersonForm\n        handleAddPerson={handleAddPerson}\n        handleInputChange={handleInputChange}\n        handlePhoneChange={handlePhoneChange}\n        name={newName}\n        number={newPhone}\n      />\n      <h2>Numbers</h2>\n      <Persons handleDeletePerson={handleDeletePerson} persons={persons} />\n    </div>\n  );\n};\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}